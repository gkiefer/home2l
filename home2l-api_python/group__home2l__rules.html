<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Home2L - Python API: Rules</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="home2l-icon-web.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Home2L - Python API
   &#160;<span id="projectnumber">v0.9-0-gde86* (2018-11-30)</span>
   </div>
   <div id="projectbrief">Clever Tools for a Private Smart Home</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Rules<div class="ingroups"><a class="el" href="group__home2l.html">Home2L</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Running functions on resource events/updates or at certain times. </p>
<div class="dynheader">
Collaboration diagram for Rules:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group__home2l__rules.png" border="0" alt="" usemap="#group____home2l____rules"/>
<map name="group____home2l____rules" id="group____home2l____rules">
<area shape="rect" id="node1" href="group__home2l.html" title="Top&#45;level of the Home2L Python package. " alt="" coords="5,5,80,32"/>
</map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6a560ea86216249ca789cbc111c15678"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__home2l__rules.html#ga6a560ea86216249ca789cbc111c15678">RunOnEvent</a> (func, rcSet=None, data=None, id=None)</td></tr>
<tr class="memdesc:ga6a560ea86216249ca789cbc111c15678"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare a function to run on an event.  <a href="group__home2l__rules.html#ga6a560ea86216249ca789cbc111c15678">More...</a><br /></td></tr>
<tr class="separator:ga6a560ea86216249ca789cbc111c15678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87092aaedb927af6fb87929cce8439d8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__home2l__rules.html#ga87092aaedb927af6fb87929cce8439d8">onEvent</a> (rcSet)</td></tr>
<tr class="memdesc:ga87092aaedb927af6fb87929cce8439d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decorator to declare a function to run on an event.  <a href="group__home2l__rules.html#ga87092aaedb927af6fb87929cce8439d8">More...</a><br /></td></tr>
<tr class="separator:ga87092aaedb927af6fb87929cce8439d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8c00b6e92194654a01451b91e06494cb"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__home2l__rules.html#ga8c00b6e92194654a01451b91e06494cb">RunOnUpdate</a> (func, rcSet, data=None, id=None)</td></tr>
<tr class="memdesc:ga8c00b6e92194654a01451b91e06494cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare a function to run on value/state change.  <a href="group__home2l__rules.html#ga8c00b6e92194654a01451b91e06494cb">More...</a><br /></td></tr>
<tr class="separator:ga8c00b6e92194654a01451b91e06494cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab239b272450aa2d04b65266b577aaf4f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__home2l__rules.html#gab239b272450aa2d04b65266b577aaf4f">onUpdate</a> (rcSet)</td></tr>
<tr class="memdesc:gab239b272450aa2d04b65266b577aaf4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decorator to declare a function to run on value/state change.  <a href="group__home2l__rules.html#gab239b272450aa2d04b65266b577aaf4f">More...</a><br /></td></tr>
<tr class="separator:gab239b272450aa2d04b65266b577aaf4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6d84413a5ee514653eb68674510cb927"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__home2l__rules.html#ga6d84413a5ee514653eb68674510cb927">RunAt</a> (func, t=0, dt=0, data=None, id=None)</td></tr>
<tr class="separator:ga6d84413a5ee514653eb68674510cb927"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6a877dcaf795f585b1b798cee7349a7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__home2l__rules.html#gae6a877dcaf795f585b1b798cee7349a7">at</a> (t=0, dt=0)</td></tr>
<tr class="memdesc:gae6a877dcaf795f585b1b798cee7349a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare a function to run at a certain time.  <a href="group__home2l__rules.html#gae6a877dcaf795f585b1b798cee7349a7">More...</a><br /></td></tr>
<tr class="separator:gae6a877dcaf795f585b1b798cee7349a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga508e3685fe4509652c082d823d51c70f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__home2l__rules.html#ga508e3685fe4509652c082d823d51c70f">RunDaily</a> (func, hostSet, data=None, id=None)</td></tr>
<tr class="memdesc:ga508e3685fe4509652c082d823d51c70f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare a daily function setting permanent requests.  <a href="group__home2l__rules.html#ga508e3685fe4509652c082d823d51c70f">More...</a><br /></td></tr>
<tr class="separator:ga508e3685fe4509652c082d823d51c70f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e669842b72b88510fe845276e835462"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__home2l__rules.html#ga8e669842b72b88510fe845276e835462">daily</a> (hostSet)</td></tr>
<tr class="memdesc:ga8e669842b72b88510fe845276e835462"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decorator to declare a function to run on value/state change.  <a href="group__home2l__rules.html#ga8e669842b72b88510fe845276e835462">More...</a><br /></td></tr>
<tr class="separator:ga8e669842b72b88510fe845276e835462"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga6a560ea86216249ca789cbc111c15678"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a560ea86216249ca789cbc111c15678">&#9670;&nbsp;</a></span>RunOnEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def home2l.RunOnEvent </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rcSet</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>id</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declare a function to run on an event. </p>
<pre class="fragment">Define a function to be called whenever an event for a set of
resources occurs.

'rcSet' can either be a 'CResource' object, an URI string or a tuple
or a list of any of those. 'data' is an optional reference to user
data that will be passed unchanged to any 'func' invocations.

For each event encountered, the function 'func' will be called as follows:

    func (ev, rc, vs, data)

where '(ERcEventType) ev' is the type of event, 'rc' is the affected
resource, and, if applicable, 'vs' is the new value and state that
has been reported for the resource. Arguments are passed as keyword
arguments. Hence, the names must match, and unsused arguments can be
abbreviated by '**kwargs'.

The event type 'ev' can be one of the following:
    rceValueStateChanged : The value or state has changed.
    rceConnected         : The connection has been (re-)established.
    rceDisconnected      : The connection has been lost.

Unlike 'RunOnEvent', the function 'func' will be called for each single
event in the correct order in time, so that no temporary value changes
get lost.

If 'rcSet' is not defined, the function 'func' is called with 'ev = rc = None'
and must then return the set. There is no way to change the set once
defined.

The parameter 'id' can usually be left unspecified. In this case, the function
names are used as identifiers. If multiple functions are passed, the ID must
be left unspecified.
</pre> 
</div>
</div>
<a id="ga87092aaedb927af6fb87929cce8439d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87092aaedb927af6fb87929cce8439d8">&#9670;&nbsp;</a></span>onEvent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def home2l.onEvent </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rcSet</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decorator to declare a function to run on an event. </p>
<pre class="fragment">Decorator variant of 'RunOnEvent'.

This decorator allows to easily let a function be executed on given events
as follows:

    @onEvent (&lt;resource set&gt;)
    def MyFunc (ev, rc, vs):
      ...</pre> 
</div>
</div>
<a id="ga8c00b6e92194654a01451b91e06494cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8c00b6e92194654a01451b91e06494cb">&#9670;&nbsp;</a></span>RunOnUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def home2l.RunOnUpdate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rcSet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>id</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declare a function to run on value/state change. </p>
<pre class="fragment">Define a function to be called on value changes of resources.

'rcSet' can either be a 'CResource' object, an URI string or a tuple
or a list of any of those. 'data' is an optional reference to user
data that will be passed unchanged to any 'func' invocations.

For each event encountered, the function 'func' will be called as follows:

    func (data)

Arguments are passed as keyword arguments. Hence, the names must match,
and unsused arguments can be abbreviated by '**kwargs'.

Unlike 'RunOnEvent', only 'rceValueStateChanged' events cause
invocations of 'func', and multiple events quickly following each
other may be merged to a single invocation, so that only the last value
is actually reported. For this reason, this mechanism is generally more
efficient and should be preferred if short intermediate value changes
are not of interest.

Important: At the invocation of 'func', all resources contained in
'rcSet' may have changed since the last invocation.

If 'rcSet' is not defined, the function 'func' is called with 'rc = None'
and must then return the set. There is no way to change the set once
defined.

The parameter 'id' can usually be left unspecified. In this case, the function
names are used as identifiers. If multiple functions are passed, the ID must
be left unspecified.
</pre> 
</div>
</div>
<a id="gab239b272450aa2d04b65266b577aaf4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab239b272450aa2d04b65266b577aaf4f">&#9670;&nbsp;</a></span>onUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def home2l.onUpdate </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>rcSet</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decorator to declare a function to run on value/state change. </p>
<pre class="fragment">Decorator variant of 'RunOnUpdate'.

This decorator allows to easily define a function executed on value changes
as follows:

    @onUpdate (&lt;resource set&gt;)
    def MyFunc (rc, vs):
      ...</pre> 
</div>
</div>
<a id="ga6d84413a5ee514653eb68674510cb927"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6d84413a5ee514653eb68674510cb927">&#9670;&nbsp;</a></span>RunAt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def home2l.RunAt </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>t</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dt</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>id</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Define a function to be called at a given time, optionally repeated
at a certain interval.

The starting time 't' can be specified by anything accepted by TicksAbsOf().
The interval 'interval' is specified in milliseconds.
If dt &lt;= 0, the timer is executed once and then deactivated. Otherwise,
the function is repeated regularly every 'dt' milliseconds.

If 'id' is not set, the function name will be used as an ID.
Calling this function again with the same ID causes the old timer to be deleted.
Presently, there is no mechanism to delete a previously defined timer.

The function 'func' will be called as follows:

    func (data)

where 'data' is the user-defined data passed to 'RunAt'.
</pre> 
</div>
</div>
<a id="gae6a877dcaf795f585b1b798cee7349a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae6a877dcaf795f585b1b798cee7349a7">&#9670;&nbsp;</a></span>at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def home2l.at </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>t</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>dt</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declare a function to run at a certain time. </p>
<pre class="fragment">Decorator variant of 'RunAt'.

This decorator allows to easily define a function executed at given times
as follows:

    @at (t = &lt;t&gt;, dt = &lt;interval&gt;)
    def MyTimedFunc ():
      ...</pre> 
</div>
</div>
<a id="ga508e3685fe4509652c082d823d51c70f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga508e3685fe4509652c082d823d51c70f">&#9670;&nbsp;</a></span>RunDaily()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def home2l.RunDaily </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>hostSet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em> = <code>None</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>id</em> = <code>None</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Declare a daily function setting permanent requests. </p>
<pre class="fragment">Define a function to be called daily or whenever one of the hosts becomes
reachable (again).

This can be used to set and keep persistent permanent requests in rules scripts.
'hostSet' can either be a single string or a tuple or a list of strings.
'data' is an optional reference to user data that will be passed unchanged to
any 'func' invocations.

Whenever a host or a set of hosts becomes reachable, the function 'func' will
be called as follows:

    func (host, data)

'host' is the host name for which rules must be updated.
Arguments are passed as keyword arguments. Hence, the names must match,
and unsused arguments can be abbreviated by '**kwargs'.

Important: On each host in the set, the 'timer' driver must be enabled.

The parameter 'id' can usually be left unspecified. In this case, the function
names are used as identifiers. If multiple functions are passed, the ID must
be left unspecified.
</pre> 
</div>
</div>
<a id="ga8e669842b72b88510fe845276e835462"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8e669842b72b88510fe845276e835462">&#9670;&nbsp;</a></span>daily()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def home2l.daily </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>hostSet</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decorator to declare a function to run on value/state change. </p>
<pre class="fragment">Decorator variant of 'RunDaily'.

This decorator allows to easily define a function executed daily or whenever
a host becomes reachable (again) as follows:

    @daily (&lt;host set&gt;)
    def MyFunc (host):
      ...</pre> 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
